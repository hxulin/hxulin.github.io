(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{933:function(t,a,s){"use strict";s.r(a);var e=s(78),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vmware-安装-centos7-开机优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vmware-安装-centos7-开机优化"}},[t._v("#")]),t._v(" VMware 安装 CentOS7 开机优化")]),t._v(" "),s("post-meta",{attrs:{date:"2021-05-12"}}),t._v(" "),s("h2",{attrs:{id:"_1、vmware-虚拟网络配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、vmware-虚拟网络配置"}},[t._v("#")]),t._v(" 1、VMware 虚拟网络配置")]),t._v(" "),s("img",{staticStyle:{border:"1px solid #CCC","margin-bottom":"1rem"},attrs:{src:t.$page.baseUrl+"assets/img/20210512/centos7-boot-optimization/vmware-network-setup-1.png",alt:"vmware-network-setup-1.png"}}),t._v(" "),s("img",{staticStyle:{border:"1px solid #CCC","margin-bottom":"1rem"},attrs:{src:t.$page.baseUrl+"assets/img/20210512/centos7-boot-optimization/vmware-network-setup-2.png",alt:"vmware-network-setup-2.png"}}),t._v(" "),s("img",{staticStyle:{border:"1px solid #CCC"},attrs:{src:t.$page.baseUrl+"assets/img/20210512/centos7-boot-optimization/vmware-network-setup-3.png",alt:"vmware-network-setup-3.png"}}),t._v(" "),s("h2",{attrs:{id:"_2、centos7-安装项配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、centos7-安装项配置"}},[t._v("#")]),t._v(" 2、CentOS7 安装项配置")]),t._v(" "),s("img",{staticStyle:{"margin-bottom":"1rem"},attrs:{src:t.$page.baseUrl+"assets/img/20210512/centos7-boot-optimization/centos7-installation-summary.png",alt:"centos7-installation-summary.png"}}),t._v(" "),s("h2",{attrs:{id:"_3、开机优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、开机优化"}},[t._v("#")]),t._v(" 3、开机优化")]),t._v(" "),s("h3",{attrs:{id:"_3-1-编辑网卡配置-设置静态-ip"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-编辑网卡配置-设置静态-ip"}},[t._v("#")]),t._v(" 3.1 编辑网卡配置，设置静态 IP")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/sysconfig/network-scripts/ifcfg-ens33\n")])])]),s("div",{staticClass:"language-properties extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br")]),s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("TYPE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("Ethernet")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("PROXY_METHOD")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("none")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("BROWSER_ONLY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("no")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("BOOTPROTO")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("dhcp    # 改为none")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("DEFROUTE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV4_FAILURE_FATAL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("no")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV6INIT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV6_AUTOCONF")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV6_DEFROUTE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("yes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV6_FAILURE_FATAL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("no")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPV6_ADDR_GEN_MODE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("stable-privacy")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("NAME")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ens33")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("UUID")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("2437316e-c76f-44ef-893d-fcc1fa2f5346    # 删除此行，防止冲突")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("DEVICE")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("ens33")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("ONBOOT")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("no                # 改为yes")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("GATEWAY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.0.0.2         # 新增网关配置，地址可从VMware NAT设置中查看")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("IPADDR")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.0.0.20         # 新增此行，配置静态IP")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("NETMASK")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("255.255.255.0    # 新增此行，配置子网掩码")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("DNS1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10.0.0.2            # 新增此行，添加内网DNS解析")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("DNS2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1.2.4.8             # 新增此行，添加外网DNS解析")]),t._v("\n")])])]),s("p",[t._v("重启网络服务")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl restart network\n")])])]),s("h3",{attrs:{id:"_3-2-解决设置静态-ip-后-ssh-登录过慢问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-解决设置静态-ip-后-ssh-登录过慢问题"}},[t._v("#")]),t._v(" 3.2 解决设置静态 IP 后 SSH 登录过慢问题")]),t._v(" "),s("p",[t._v("修改 ssh 配置文件：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/ssh/sshd_config\n")])])]),s("p",[t._v("找到如下配置节点：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#UseDNS yes")]),t._v("\n")])])]),s("p",[t._v("修改为：")]),t._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("UseDNS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("no")]),t._v("\n")])])]),s("p",[t._v("重启 ssh 服务，使配置生效：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl restart sshd\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("快速修改")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s/#UseDNS yes/UseDNS no/g'")]),t._v(" /etc/ssh/sshd_config\nsystemctl restart sshd.service\n")])])])]),t._v(" "),s("h3",{attrs:{id:"_3-3-yum-源优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-yum-源优化"}},[t._v("#")]),t._v(" 3.3 yum 源优化")]),t._v(" "),s("p",[t._v("将默认 yum 源改为国内 yum 源")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 备份")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载阿里源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清理并重建缓存")]),t._v("\nyum clean all "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" yum makecache\n")])])]),s("p",[t._v("添加 epel 源")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看系统是否已有 epel")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -qa "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" epel\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果有的话先卸载之前的 epel 以免受影响")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rpm")]),t._v(" -e epel-release\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 下载阿里的 epel 源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 清理并重建缓存")]),t._v("\nyum clean all "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" yum makecache\n")])])]),s("h3",{attrs:{id:"_3-4-优化网络管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-优化网络管理"}},[t._v("#")]),t._v(" 3.4 优化网络管理")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("systemctl stop NetworkManager\nsystemctl disable NetworkManager\n")])])]),s("blockquote",[s("p",[s("strong",[t._v("相关文章")])]),t._v(" "),s("p",[s("a",{attrs:{href:t.$withBase("/2021/03/27/centos7-turn-off-selinux-firewall/"),target:"_blank"}},[t._v("CentOS7 关闭 selinux、防火墙")])]),t._v(" "),s("p",[s("a",{attrs:{href:t.$withBase("/2021/03/27/centos7-set-timezone-hostname-hosts/"),target:"_blank"}},[t._v("CentOS7 集群环境设置时区、主机名，配置 hosts 文件")])])])],1)}),[],!1,null,null,null);a.default=r.exports}}]);